context support {
// Ð¢Ð•Ð¥.ÐŸÐžÐ”Ð”Ð•Ð Ð–ÐšÐ
    _555 => {
    	    &recording(${CALLERID(number)},${EXTEN});
	    &SupportCall();
	    }
};

context to-neo {
// Ð—Ð²Ð¾Ð½Ð¾Ðº Ð² Ð¾Ñ„Ð¸Ñ
    _XXX  => {
        &recording(${CALLERID(number)},${EXTEN});
        &BusyCheckLocal(${EXTEN});
        Dial(SIP/${EXTEN},60,mTt);
    }
};

context local-users {
    _111  => {
       &recording(${CALLERID(number)},${EXTEN});
       &BusyCheckLocal(${EXTEN});
       Dial(SIP/111&SIP/105,15,mTt);
       Dial(SIP/AIST_TRUNK/299844,60,mTt);
    }

    _666  => {
	Answer();
	Read(NUMBER,/var/lib/asterisk/sounds/greetings,3,,,15);
        &recording(${CALLERID(number)},${EXTEN});
	SayDigits(${CALLERID(number)});
	Noop(${CALLERID(number)});

	if (${NUMBER} = 111 ) {
	    Dial(SIP/105&SIP/111,15,mT);
	    Dial(SIP/AIST_TRUNK/299844,60,mT);
        }
	
	if (${NUMBER} = 555 ) {
    	    &SupportCall();
        }

        Playback(/var/lib/asterisk/sounds/company-welcome&/var/lib/asterisk/sounds/calls-are-recorded);
        Read(NUMBER,/var/lib/asterisk/sounds/press-1&/var/lib/asterisk/sounds/press-2&/var/lib/asterisk/sounds/then-press-pound,3,,,15);

	if (${NUMBER} = 1 ) {
	    SayDigits(${NUMBER});
	    Dial(SIP/105,30,mT);
	}

	if (${NUMBER} = 2 ) {
	    SayDigits(${NUMBER});
	    Dial(SIP/105,30,mT);
	}
    }

    _XXX  => {
	&recording(${CALLERID(number)},${EXTEN});
	&BusyCheckLocal(${EXTEN});
	Dial(SIP/${EXTEN},60,mTt);
    }

     _199 => {                                                                                                                                                                                                              
           MeetMe(2000,Mc);                                                                                                                                                                                                 
      };   

// Admin Call
    _299255 => {
	&recording(${CALLERID(number)},${EXTEN});
	Dial(SIP/105,60,mTt);
    }

//    _299844 => {
//	&recording(${CALLERID(number)},${EXTEN});
//	&SupportCall();
//    }

// Ð—Ð²Ð¾Ð½ÐºÐ¸ Ð½Ð° 557675 Ð¿Ð¾ Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½ÐµÐ¹ ÑÐµÑ‚Ð¸
    _557675 => {
	///	AIST 557675	///
	// ÐŸÑ€Ð¸Ð±Ð°Ð²Ð¸Ð¼ Ð³Ñ€Ð¾Ð¼ÐºÐ¾ÑÑ‚ÑŒ
	Set(VOLUME(TX)=1);
	Set(VOLUME(RX)=1);

	Answer();
//	Read(NUMBER,/var/lib/asterisk/sounds/greetings,3,,,15);
	Read(NUMBER,/var/lib/asterisk/sounds/zdravstujte&/var/lib/asterisk/sounds/dial-exten-tone,3,,,15);
        &recording(${CALLERID(number)},${EXTEN});

	if (${NUMBER} = 111 ) {
    	    Noop(${CALLERID(number)});
    	    if (${CALLERID(number)} = 4953630660 ) {
        	Playback(/var/lib/asterisk/sounds/all-circuits-busy);
        	Hangup();
    	    }
    	    Dial(SIP/105&SIP/111,15,mT);
    	    Dial(SIP/AIST_TRUNK/299844,60,mT);
        }

	if (${NUMBER} = 555 ) {
	    &SupportCall();
	}
    
	if (${EXISTS(${NUMBER})} = 0 ) {
	    Playback(/var/lib/asterisk/sounds/vremja-ozhidanija-isteklo&do-svidanija);
        }else{
    	    &BusyCheckLocal(${NUMBER});
    	    Dial(SIP/${NUMBER},60,mTt);
        }
    };

    _XXXXXX => {
	// ÐŸÑ€Ð¸Ð±Ð°Ð²Ð¸Ð¼ Ð³Ñ€Ð¾Ð¼ÐºÐ¾ÑÑ‚ÑŒ
	    Set(VOLUME(TX)=3);
	    Set(VOLUME(RX)=3);

//	    Set(CALLERID(num)=);
//	    Set(CALLERID(num)=000${CALLERID(num)});
	    Set(CALLERID(num)=557675);
	    &recording(${CALLERID(number)},${EXTEN});
	    Dial(SIP/AIST_TRUNK/${EXTEN},,mT);
    }


    _909 => {
	&RecordGreeting();
     }

//    _999 => {
//        Answer();
//        Wait(1);
//        AGI(say.php,"Ð—Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹Ñ‚Ðµ");
//        AGI(say.php,"Ð’Ð°Ñ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ñ");
//        AGI(say.php,"Habrahabr!",en);
//        AGI(say.php,"Ð’Ð°Ñˆ Ð·Ð²Ð¾Ð½Ð¾Ðº Ð²Ð°Ð¶ÐµÐ½ Ð´Ð»Ñ Ð½Ð°Ñ!");
//        AGI(say.php,"ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°!");
//        AGI(say.php,"Ð¾ÑÑ‚Ð°Ð²Ð°Ð¹Ñ‚ÐµÑÑŒ Ð½Ð° Ð»Ð¸Ð½Ð¸Ð¸");
//        AGI(say.php,"Ð’Ð°Ð¼ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚!");
//     }

    _*XXX => {                                                                                                                                                                                                                   
	&recording(${CALLERID(number)},${EXTEN});
    	Dial(SIP/${EXTEN:1},60,mTt);
    }

    _*XXXXXX => {                                                                                                                                                                                                                   
	&recording(${CALLERID(number)},${EXTEN});
	Set(CALLERID(num)=557675);
	Dial(SIP/AIST_TRUNK/${EXTEN:1},60,mTt);                                                                                                                                                                                        
    }                                                                                                                                                                                                                            
    _0X => {                                                                                                                                                                                                                   
	&recording(${CALLERID(number)},${EXTEN});
	Set(CALLERID(num)=557675);
	Dial(SIP/AIST_TRUNK/${EXTEN:1},60,mTt);                                                                                                                                                                                        
    }                                                                                                                                                                                                                            
        
    _**1XX => {
         Dial(IAX2/neo-kusto/${EXTEN:2},60);
    }
    
    _38XX => {
//	Set(CALLERID(num)=${CALLERID(number)});
	&recording(${CALLERID(number)},${EXTEN});
        Dial(OOH323/emg80-fok/${EXTEN},60,Tt);
     };

    _12XX => {
	&recording(${CALLERID(number)},${EXTEN});
        Dial(SIP/LG800_TRUNK/${EXTEN},60,mT);
     };
    _13XX => {
	&recording(${CALLERID(number)},${EXTEN});
        Dial(SIP/LG800_TRUNK/${EXTEN},60,mT);
    };
    _XXXX => {
	&recording(${CALLERID(number)},${EXTEN});
        Dial(IAX2/neo-mindal/${EXTEN},60,mT);
     };
};

context sipnet-users {       

// ÐÐ²Ð¾Ð½Ð¸Ðº Ð½Ð° Ð¼ÐµÐ¶Ð³Ð¾ÑÐ¾Ð´ ÑÐµÑÐµÐ· sipnet
                      _849XXXXXXXX =>{
//                      &SaveToMp3();
			 &recording(${CALLERID(number)},${EXTEN});
                       Dial(SIP/${EXTEN}@SIPNET,,T);
		        };

                      _88XXXXXXXXX =>{
//                      &SaveToMp3();
			&recording(${CALLERID(number)},${EXTEN});
                       Dial(SIP/${EXTEN}@SIPNET,,T);
			};

                      _90XXXXXXXXX =>{
//                      &SaveToMp3();
			&recording(${CALLERID(number)},${EXTEN});
                       Dial(SIP/${EXTEN}@SIPNET,,T);
			};

                      _89XXXXXXXXX =>{
//                      &SaveToMp3();
			&recording(${CALLERID(number)},${EXTEN});
//                       Dial(SIP/7${EXTEN:1}@KURS,,T);
                       Dial(SIP/${EXTEN}@SIPNET,,T);
//			Playback(goodbye);
//			Playback(/var/lib/asterisk/sounds/dosvidaniya);
    			Hangup();
			};

                      _8XXXXXXXXXX =>{
//                      &SaveToMp3();
			 &recording(${CALLERID(number)},${EXTEN});
                       Dial(SIP/${EXTEN}@SIPNET,,T);
			};

                      _847XXXXXXXX =>{
//                      &SaveToMp3();
			 &recording(${CALLERID(number)},${EXTEN});
                       Dial(SIP/${EXTEN}@SIPNET,,T);
			};
                      _375XXXXXXXXX =>{
//                      &SaveToMp3();
			 &recording(${CALLERID(number)},${EXTEN});
                       Dial(SIP/${EXTEN}@SIPNET,,T);
			};
};
                   

// ÐÑÐ¾Ð´ÑÑÐ¸Ðµ Ñ ÑÐµÐ»ÐµÑÐ¾Ð½Ð½Ð¾Ð¹ Ð»Ð¸Ð½Ð¸Ð¸ ÑÐµÑÐµÐ· Linksys                                                                                                                                                                                     
    context from-gw {
    111 => {
	&recording(${CALLERID(number)},${EXTEN});
	&SupportCall();
//	Dial(SIP/111&SIP/105&SIP/153,70,mt);
    }
}

context foktrunk {
        includes {
            support;
            albatros-users;
        };
}

context ats-users {
    _99XXX => {
        Dial(SIP/${EXTEN:2}@spa3102,,mT);
         }

	
     _9XXXXXX => {
         MixMonitor(${UNIQUEID}.wav);   
        Noop(${EXTEN});
        Dial(SIP/9p${EXTEN:1}@spa3102,60,mT);
          };
}

// ÐÑÐ¾Ð´ÑÑÐ¸Ðµ Ñ SIPNET
    context from-sipnet {
            _0041894509 => {
		 &recording(${CALLERID(number)},${EXTEN});
                 Dial(SIP/105,60,t);
            };
}
